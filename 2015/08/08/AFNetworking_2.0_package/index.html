<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="ArxqF9fNvIlxybI0naTgEy2PwvvvHyAs35iOfxJqL8o" />










  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="iOS,AFNetworking," />





  <link rel="alternate" href="/atom.xml" title="Ivan's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="最近项目从自己的网络框架换到了AFNetworking，集中学习了一下，并且进行了一次封装。首先先附上AFNetworking的地址:https://github.com/AFNetworking/AFNetworking，star已经19078，确实ios中性能最好最强大的网络库。以及官方的文档AFNetworking-2.0-Migration-Guide 使用方法推荐Cocoapods Po">
<meta name="keywords" content="iOS,AFNetworking">
<meta property="og:type" content="article">
<meta property="og:title" content="AFNetworking学习、封装">
<meta property="og:url" content="http://yeziahehe.com/2015/08/08/AFNetworking_2.0_package/index.html">
<meta property="og:site_name" content="Ivan&#39;s Blog">
<meta property="og:description" content="最近项目从自己的网络框架换到了AFNetworking，集中学习了一下，并且进行了一次封装。首先先附上AFNetworking的地址:https://github.com/AFNetworking/AFNetworking，star已经19078，确实ios中性能最好最强大的网络库。以及官方的文档AFNetworking-2.0-Migration-Guide 使用方法推荐Cocoapods Po">
<meta property="og:image" content="http://yeziahehe.com/cc.png">
<meta property="og:updated_time" content="2016-09-02T03:01:43.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="AFNetworking学习、封装">
<meta name="twitter:description" content="最近项目从自己的网络框架换到了AFNetworking，集中学习了一下，并且进行了一次封装。首先先附上AFNetworking的地址:https://github.com/AFNetworking/AFNetworking，star已经19078，确实ios中性能最好最强大的网络库。以及官方的文档AFNetworking-2.0-Migration-Guide 使用方法推荐Cocoapods Po">
<meta name="twitter:image" content="http://yeziahehe.com/cc.png">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'hide',
    motion: true
  };
</script>

  <title> AFNetworking学习、封装 | Ivan's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <a href="https://github.com/yeziahehe"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Ivan's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-oj">
          <a href="/categories/LeetCode-OJ/" rel="section">
            
              <i class="menu-item-icon fa fa-question-circle fa-fw"></i> <br />
            
            LeetCode OJ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                AFNetworking学习、封装
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-08-08T23:15:11+08:00" content="2015-08-08">
              2015-08-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          <span class="post-count">
            &nbsp; | &nbsp; 字数
              16,640
          </span>

          
            <span id="busuanzi_container_page_pv">
              &nbsp; | &nbsp;
              <i class="fa fa-eye"></i>&nbsp;
              <span id="busuanzi_value_page_pv">1</span>
            </span>
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><p>最近项目从自己的网络框架换到了AFNetworking，集中学习了一下，并且进行了一次封装。<br>首先先附上AFNetworking的地址:<a href="https://github.com/AFNetworking/AFNetworking" target="_blank" rel="external">https://github.com/AFNetworking/AFNetworking</a><br>，star已经19078，确实ios中性能最好最强大的网络库。以及官方的文档<a href="https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-2.0-Migration-Guide" target="_blank" rel="external">AFNetworking-2.0-Migration-Guide</a></p>
<p>使用方法推荐<a href="http://code4app.com/article/cocoapods-install-usage" target="_blank" rel="external">Cocoapods</a></p>
<p>Podfile</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">platform :ios, '7.0'</div><div class="line">pod "AFNetworking", "~&gt; 2.0"</div></pre></td></tr></table></figure>
<p>下面主要介绍的AFNetworking 2.0的一些新特性:</p>
<h3 id="1-AFURLSessionManager"><a href="#1-AFURLSessionManager" class="headerlink" title="1.AFURLSessionManager"></a>1.AFURLSessionManager</h3><p>AFURLSessionManager是2.0的新特性，是基于NSURLSessionConfiguration(IOS 7.0+, MAC OX10_9+)的。</p>
<p>我们主要借助于这个类进行一次自己的封装，首先我们先来学习一下这个类。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div><div class="line">699</div><div class="line">700</div><div class="line">701</div><div class="line">702</div><div class="line">703</div><div class="line">704</div><div class="line">705</div><div class="line">706</div><div class="line">707</div><div class="line">708</div><div class="line">709</div><div class="line">710</div><div class="line">711</div><div class="line">712</div><div class="line">713</div><div class="line">714</div><div class="line">715</div><div class="line">716</div><div class="line">717</div><div class="line">718</div><div class="line">719</div><div class="line">720</div><div class="line">721</div><div class="line">722</div><div class="line">723</div><div class="line">724</div><div class="line">725</div><div class="line">726</div><div class="line">727</div><div class="line">728</div><div class="line">729</div><div class="line">730</div><div class="line">731</div><div class="line">732</div><div class="line">733</div><div class="line">734</div><div class="line">735</div><div class="line">736</div><div class="line">737</div><div class="line">738</div><div class="line">739</div><div class="line">740</div><div class="line">741</div><div class="line">742</div><div class="line">743</div><div class="line">744</div><div class="line">745</div><div class="line">746</div><div class="line">747</div><div class="line">748</div><div class="line">749</div><div class="line">750</div><div class="line">751</div><div class="line">752</div><div class="line">753</div><div class="line">754</div><div class="line">755</div><div class="line">756</div><div class="line">757</div><div class="line">758</div><div class="line">759</div><div class="line">760</div><div class="line">761</div><div class="line">762</div><div class="line">763</div><div class="line">764</div><div class="line">765</div><div class="line">766</div><div class="line">767</div><div class="line">768</div><div class="line">769</div><div class="line">770</div><div class="line">771</div><div class="line">772</div><div class="line">773</div><div class="line">774</div><div class="line">775</div><div class="line">776</div><div class="line">777</div><div class="line">778</div><div class="line">779</div><div class="line">780</div><div class="line">781</div><div class="line">782</div><div class="line">783</div><div class="line">784</div><div class="line">785</div><div class="line">786</div><div class="line">787</div><div class="line">788</div><div class="line">789</div><div class="line">790</div><div class="line">791</div><div class="line">792</div><div class="line">793</div><div class="line">794</div><div class="line">795</div><div class="line">796</div><div class="line">797</div><div class="line">798</div><div class="line">799</div><div class="line">800</div><div class="line">801</div><div class="line">802</div><div class="line">803</div><div class="line">804</div><div class="line">805</div><div class="line">806</div><div class="line">807</div><div class="line">808</div><div class="line">809</div><div class="line">810</div><div class="line">811</div><div class="line">812</div><div class="line">813</div><div class="line">814</div><div class="line">815</div><div class="line">816</div><div class="line">817</div><div class="line">818</div><div class="line">819</div><div class="line">820</div><div class="line">821</div><div class="line">822</div><div class="line">823</div><div class="line">824</div><div class="line">825</div><div class="line">826</div><div class="line">827</div><div class="line">828</div><div class="line">829</div><div class="line">830</div><div class="line">831</div><div class="line">832</div><div class="line">833</div><div class="line">834</div><div class="line">835</div><div class="line">836</div><div class="line">837</div><div class="line">838</div><div class="line">839</div><div class="line">840</div><div class="line">841</div><div class="line">842</div><div class="line">843</div><div class="line">844</div><div class="line">845</div><div class="line">846</div><div class="line">847</div><div class="line">848</div><div class="line">849</div><div class="line">850</div><div class="line">851</div><div class="line">852</div><div class="line">853</div><div class="line">854</div><div class="line">855</div><div class="line">856</div><div class="line">857</div><div class="line">858</div><div class="line">859</div><div class="line">860</div><div class="line">861</div><div class="line">862</div><div class="line">863</div><div class="line">864</div><div class="line">865</div><div class="line">866</div><div class="line">867</div><div class="line">868</div><div class="line">869</div><div class="line">870</div><div class="line">871</div><div class="line">872</div><div class="line">873</div><div class="line">874</div><div class="line">875</div><div class="line">876</div><div class="line">877</div><div class="line">878</div><div class="line">879</div><div class="line">880</div><div class="line">881</div><div class="line">882</div><div class="line">883</div><div class="line">884</div><div class="line">885</div><div class="line">886</div><div class="line">887</div><div class="line">888</div><div class="line">889</div><div class="line">890</div><div class="line">891</div><div class="line">892</div><div class="line">893</div><div class="line">894</div><div class="line">895</div><div class="line">896</div><div class="line">897</div><div class="line">898</div><div class="line">899</div><div class="line">900</div><div class="line">901</div><div class="line">902</div><div class="line">903</div><div class="line">904</div><div class="line">905</div><div class="line">906</div><div class="line">907</div><div class="line">908</div><div class="line">909</div><div class="line">910</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// AFURLSessionManager.h</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Copyright (c) 2013-2015 AFNetworking (http://afnetworking.com)</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Permission is hereby granted, free of charge, to any person obtaining a copy</span></div><div class="line"><span class="comment">// of this software and associated documentation files (the "Software"), to deal</span></div><div class="line"><span class="comment">// in the Software without restriction, including without limitation the rights</span></div><div class="line"><span class="comment">// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div><div class="line"><span class="comment">// copies of the Software, and to permit persons to whom the Software is</span></div><div class="line"><span class="comment">// furnished to do so, subject to the following conditions:</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// The above copyright notice and this permission notice shall be included in</span></div><div class="line"><span class="comment">// all copies or substantial portions of the Software.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><span class="comment">// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><span class="comment">// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><span class="comment">// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><span class="comment">// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div><div class="line"><span class="comment">// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div><div class="line"><span class="comment">// THE SOFTWARE.</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">"AFURLResponseSerialization.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"AFURLRequestSerialization.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"AFSecurityPolicy.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"AFNetworkReachabilityManager.h"</span></span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> `AFURLSessionManager` creates and manages an `NSURLSession` object based on a specified `NSURLSessionConfiguration` object, which conforms to `&lt;NSURLSessionTaskDelegate&gt;`, `&lt;NSURLSessionDataDelegate&gt;`, `&lt;NSURLSessionDownloadDelegate&gt;`, and `&lt;NSURLSessionDelegate&gt;`.</div><div class="line"></div><div class="line"> `AFURLSessionManager` 基于指定的 `NSURLSessionConfiguration` 创建并管理一个 `NSURLSession` 对象</div><div class="line"> 遵守 `NSURLSessionTaskDelegate`、`NSURLSessionDataDelegate`、`NSURLSessionDownloadDelegate` 和 `NSURLSessionDelegate` 协议</div><div class="line"></div><div class="line"></div><div class="line"> ## Subclassing Notes - 子类注意事项</div><div class="line"></div><div class="line"> This is the base class for `AFHTTPSessionManager`, which adds functionality specific to making HTTP requests. If you are looking to extend `AFURLSessionManager` specifically for HTTP, consider subclassing `AFHTTPSessionManager` instead.</div><div class="line"></div><div class="line"> 本类是 `AFHTTPSessionManager` 类的基类</div><div class="line"> `AFHTTPSessionManager` 针对 HTTP 请求添加了特定的方法</div><div class="line"> 如果希望针对 HTTP 协议扩展网络访问功能，建议从 `AFHTTPSessionManager` 派生子类</div><div class="line"></div><div class="line"></div><div class="line"> ## NSURLSession &amp; NSURLSessionTask Delegate Methods - NSURLSession 和 NSURLSessionTask 代理方法</div><div class="line"></div><div class="line"> `AFURLSessionManager` implements the following delegate methods:</div><div class="line"> `AFURLSessionManager` 实现了以下代理方法：</div><div class="line"></div><div class="line"> ### `NSURLSessionDelegate`</div><div class="line"></div><div class="line"> - `URLSession:didBecomeInvalidWithError:`</div><div class="line"> - `URLSession:didReceiveChallenge:completionHandler:`</div><div class="line"> - `URLSessionDidFinishEventsForBackgroundURLSession:`</div><div class="line"></div><div class="line"> ### `NSURLSessionTaskDelegate`</div><div class="line"></div><div class="line"> - `URLSession:willPerformHTTPRedirection:newRequest:completionHandler:`</div><div class="line"> - `URLSession:task:didReceiveChallenge:completionHandler:`</div><div class="line"> - `URLSession:task:didSendBodyData:totalBytesSent:totalBytesExpectedToSend:`</div><div class="line"> - `URLSession:task:didCompleteWithError:`</div><div class="line"></div><div class="line"> ### `NSURLSessionDataDelegate`</div><div class="line"></div><div class="line"> - `URLSession:dataTask:didReceiveResponse:completionHandler:`</div><div class="line"> - `URLSession:dataTask:didBecomeDownloadTask:`</div><div class="line"> - `URLSession:dataTask:didReceiveData:`</div><div class="line"> - `URLSession:dataTask:willCacheResponse:completionHandler:`</div><div class="line"></div><div class="line"> ### `NSURLSessionDownloadDelegate`</div><div class="line"></div><div class="line"> - `URLSession:downloadTask:didFinishDownloadingToURL:`</div><div class="line"> - `URLSession:downloadTask:didWriteData:totalBytesWritten:totalBytesWritten:totalBytesExpectedToWrite:`</div><div class="line"> - `URLSession:downloadTask:didResumeAtOffset:expectedTotalBytes:`</div><div class="line"></div><div class="line"> If any of these methods are overridden in a subclass, they _must_ call the `super` implementation first.</div><div class="line"> 如果在子类中重写了这些方法，必须先调用 `super` 的实现</div><div class="line"></div><div class="line"> ## Network Reachability Monitoring - 网络连接状态监听</div><div class="line"></div><div class="line"> Network reachability status and change monitoring is available through the `reachabilityManager` property. Applications may choose to monitor network reachability conditions in order to prevent or suspend any outbound requests. See `AFNetworkReachabilityManager` for more details.</div><div class="line"></div><div class="line"> 可以通过 `reachabilityManager` 属性监听网络连接状态是否可用</div><div class="line"> 应用程序通过监听网络连接状态条件，可以阻止或暂停出站请求</div><div class="line"></div><div class="line"></div><div class="line"> ## NSCoding Caveats - NSCoding 注意事项</div><div class="line"></div><div class="line"> - Encoded managers do not include any block properties. Be sure to set delegate callback blocks when using `-initWithCoder:` or `NSKeyedUnarchiver`.</div><div class="line"></div><div class="line"> 被编码的管理器不包含任何 block 属性。如果使用 `-initWithCoder:` 或者 `NSKeyedUnarchiver`，需要设置代理回调的 block</div><div class="line"></div><div class="line"></div><div class="line"> ## NSCopying Caveats － NSCopying 注意事项</div><div class="line"></div><div class="line"> - `-copy` and `-copyWithZone:` return a new manager with a new `NSURLSession` created from the configuration of the original.</div><div class="line"> - Operation copies do not include any delegate callback blocks, as they often strongly captures a reference to `self`, which would otherwise have the unintuitive side-effect of pointing to the _original_ session manager when copied.</div><div class="line"></div><div class="line"> `-copy` 和 `-copyWithZone:` 方法返回一个新的管理器，并新建一个 `NSURLSession`</div><div class="line"> `NSURLSession` 的配置使用原有配置</div><div class="line"> 操作副本不包含任何代理回调 block，这是因为在 block 中经常会出现对 `self` 的强引用，而如果拷贝 block，会在拷贝时将指针指向原有的 session 管理器</div><div class="line"></div><div class="line"></div><div class="line"> @warning Managers for background sessions must be owned for the duration of their use. This can be accomplished by creating an application-wide or shared singleton instance.</div><div class="line"> 后台会话的管理器必须被长期持有，以保证有足够的时间完成工作，可以创建一个应用程序范围的管理器或者共享的单例来实现。</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="meta">#if (defined(__IPHONE_OS_VERSION_MAX_ALLOWED) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= 70000) || (defined(__MAC_OS_X_VERSION_MAX_ALLOWED) &amp;&amp; __MAC_OS_X_VERSION_MAX_ALLOWED &gt;= 1090)</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AFURLSessionManager</span> : <span class="title">NSObject</span> &lt;<span class="title">NSURLSessionDelegate</span>, <span class="title">NSURLSessionTaskDelegate</span>, <span class="title">NSURLSessionDataDelegate</span>, <span class="title">NSURLSessionDownloadDelegate</span>, <span class="title">NSSecureCoding</span>, <span class="title">NSCopying</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The managed session.</div><div class="line"> 被管理的网络会话</div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSURLSession</span> *session;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The operation queue on which delegate callbacks are run.</div><div class="line"> 代理回调运行的操作队列</div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSOperationQueue</span> *operationQueue;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Responses sent from the server in data tasks created with `dataTaskWithRequest:success:failure:` and run using the `GET` / `POST` / et al. convenience methods are automatically validated and serialized by the response serializer. By default, this property is set to an instance of `AFJSONResponseSerializer`.</div><div class="line"></div><div class="line"> 使用 `GET` / `POST` 等常用方法通过 `dataTaskWithRequest:success:failure:` 数据任务创建的由服务器返回的响应</div><div class="line"> 响应数据会被自动验证并由响应序列化器反序列化</div><div class="line"> 默认情况下，该属性是 `AFJSONResponseSerializer` 的实例(默认服务器返回的是 JSON 数据)</div><div class="line"></div><div class="line"></div><div class="line"> @warning `responseSerializer` must not be `nil`.</div><div class="line"> `responseSerializer` 不能为nil</div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="keyword">id</span> &lt;AFURLResponseSerialization&gt; responseSerializer;</div><div class="line"></div><div class="line"><span class="comment">///-------------------------------</span></div><div class="line"><span class="comment">/// @name Managing Security Policy - 管理安全策略</span></div><div class="line"><span class="comment">///-------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The security policy used by created request operations to evaluate server trust for secure connections. `AFURLSessionManager` uses the `defaultPolicy` unless otherwise specified.</div><div class="line"></div><div class="line"> 用于创建请求操作的安全策略，以建立服务器信任的安全连接</div><div class="line"> 除非特殊指定 `AFURLSessionManager` 使用 `defaultPolicy`</div><div class="line"></div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) AFSecurityPolicy *securityPolicy;</div><div class="line"></div><div class="line"><span class="comment">///--------------------------------------</span></div><div class="line"><span class="comment">/// @name Monitoring Network Reachability - 监听网络连接状态</span></div><div class="line"><span class="comment">///--------------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The network reachability manager. `AFURLSessionManager` uses the `sharedManager` by default.</div><div class="line"></div><div class="line"> 网络连接管理器</div><div class="line"> `AFURLSessionManager` 默认使用 `sharedManager`</div><div class="line"></div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">readwrite</span>, <span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) AFNetworkReachabilityManager *reachabilityManager;</div><div class="line"></div><div class="line"><span class="comment">///----------------------------</span></div><div class="line"><span class="comment">/// @name Getting Session Tasks - 获取会话任务</span></div><div class="line"><span class="comment">///----------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The data, upload, and download tasks currently run by the managed session.</div><div class="line"> 被管理的会话当前运行的数据、上传和下载任务</div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSArray</span> *tasks;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The data tasks currently run by the managed session.</div><div class="line"> 被管理的会话当前运行的数据任务</div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSArray</span> *dataTasks;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The upload tasks currently run by the managed session.</div><div class="line"> 被管理的会话当前运行的上传任务</div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSArray</span> *uploadTasks;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The download tasks currently run by the managed session.</div><div class="line"> 被管理的会话当前运行的下载任务</div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>, <span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSArray</span> *downloadTasks;</div><div class="line"></div><div class="line"><span class="comment">///-------------------------------</span></div><div class="line"><span class="comment">/// @name Managing Callback Queues - 管理回调队列</span></div><div class="line"><span class="comment">///-------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The dispatch queue for `completionBlock`. If `NULL` (default), the main queue is used.</div><div class="line"></div><div class="line"> `completionBlock` 的调度队列</div><div class="line"> 如果为 `NULL`（默认），使用主队列</div><div class="line"></div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">dispatch_queue_t</span> completionQueue;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The dispatch group for `completionBlock`. If `NULL` (default), a private dispatch group is used.</div><div class="line"></div><div class="line"> `completionBlock` 的调度组</div><div class="line"> 如果为 `NULL`（默认），使用一个私有调度组</div><div class="line"></div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) dispatch_group_t completionGroup;</div><div class="line"></div><div class="line"><span class="comment">///---------------------------------</span></div><div class="line"><span class="comment">/// @name Working Around System Bugs - 处理系统 Bugs</span></div><div class="line"><span class="comment">///---------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Whether to attempt to retry creation of upload tasks for background sessions when initial call returns `nil`. `NO` by default.</div><div class="line"></div><div class="line"> 如果初始调用返回 `nil`，是否为后台会话重新创建上传任务</div><div class="line"> 默认为 `NO`</div><div class="line"></div><div class="line"></div><div class="line"> bug: As of iOS 7.0, there is a bug where upload tasks created for background tasks are sometimes `nil`. As a workaround, if this property is `YES`, AFNetworking will follow Apple's recommendation to try creating the task again.</div><div class="line"> &lt;p&gt;BUG&lt;/p&gt;</div><div class="line"></div><div class="line"> 在 iOS 7.0中，有时会无法为后台任务创建上传任务，而只是得到 `nil`</div><div class="line"> 作为解决办法，如果将此属性设置为 `YES`，AFNetworking 将按照苹果的建议，尝试再次创建任务</div><div class="line"></div><div class="line"></div><div class="line"> @see https://github.com/AFNetworking/AFNetworking/issues/1675</div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> attemptsToRecreateUploadTasksForBackgroundSessions;</div><div class="line"></div><div class="line"><span class="comment">///---------------------</span></div><div class="line"><span class="comment">/// @name Initialization - 初始化</span></div><div class="line"><span class="comment">///---------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Creates and returns a manager for a session created with the specified configuration. This is the designated initializer.</div><div class="line"></div><div class="line"> 使用指定的配置为网络会话创建并返回一个管理器</div><div class="line"> 这是指定的初始化方法</div><div class="line"></div><div class="line"> @param configuration The configuration used to create the managed session.</div><div class="line"> 用于创建管理的网络会话的配置</div><div class="line"></div><div class="line"> @return A manager for a newly-created session.</div><div class="line"> 新创建的网络会话管理器</div><div class="line"> */</div><div class="line">- (<span class="keyword">instancetype</span>)initWithSessionConfiguration:(<span class="built_in">NSURLSessionConfiguration</span> *)configuration <span class="built_in">NS_DESIGNATED_INITIALIZER</span>;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Invalidates the managed session, optionally canceling pending tasks.</div><div class="line"></div><div class="line"> 使管理的会话无效</div><div class="line"> 可用于取消尚未完成的任务</div><div class="line"></div><div class="line"></div><div class="line"> @param cancelPendingTasks Whether or not to cancel pending tasks.</div><div class="line"> 是否取消尚未完成的任务</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)invalidateSessionCancelingTasks:(<span class="built_in">BOOL</span>)cancelPendingTasks;</div><div class="line"></div><div class="line"><span class="comment">///-------------------------</span></div><div class="line"><span class="comment">/// @name Running Data Tasks - 运行数据任务</span></div><div class="line"><span class="comment">///-------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Creates an `NSURLSessionDataTask` with the specified request.</div><div class="line"> 使用指定的请求创建一个 `NSURLSessionDataTask`</div><div class="line"></div><div class="line"> @param request The HTTP request for the request.</div><div class="line"> HTTP 请求</div><div class="line"> @param completionHandler A block object to be executed when the task finishes. This block has no return value and takes three arguments: the server response, the response object created by that serializer, and the error that occurred, if any.</div><div class="line"></div><div class="line"> 任务完成后执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 该 block 有三个参数：服务器响应，序列化器创建的响应对象，错误(如果有)</div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="built_in">NSURLSessionDataTask</span> *)dataTaskWithRequest:(<span class="built_in">NSURLRequest</span> *)request</div><div class="line">                            completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLResponse</span> *response, <span class="keyword">id</span> responseObject, <span class="built_in">NSError</span> *error))completionHandler;</div><div class="line"></div><div class="line"><span class="comment">///---------------------------</span></div><div class="line"><span class="comment">/// @name Running Upload Tasks - 运行上传任务</span></div><div class="line"><span class="comment">///---------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Creates an `NSURLSessionUploadTask` with the specified request for a local file.</div><div class="line"> 使用指定的请求和一个本地文件，创建一个 `NSURLSessionUploadTask`</div><div class="line"></div><div class="line"> @param request The HTTP request for the request.</div><div class="line"> HTTP 请求</div><div class="line"> @param fileURL A URL to the local file to be uploaded.</div><div class="line"> 要上传的本地文件的 URL</div><div class="line"> @param progress A progress object monitoring the current upload progress.</div><div class="line"> 监听当前上传进度的进度对象</div><div class="line"> @param completionHandler A block object to be executed when the task finishes. This block has no return value and takes three arguments: the server response, the response object created by that serializer, and the error that occurred, if any.</div><div class="line"></div><div class="line"> 任务完成后执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 该 block 有三个参数：服务器响应，序列化器创建的响应对象，错误(如果有)</div><div class="line"></div><div class="line"></div><div class="line"> @see `attemptsToRecreateUploadTasksForBackgroundSessions`</div><div class="line"> */</div><div class="line">- (<span class="built_in">NSURLSessionUploadTask</span> *)uploadTaskWithRequest:(<span class="built_in">NSURLRequest</span> *)request</div><div class="line">                                         fromFile:(<span class="built_in">NSURL</span> *)fileURL</div><div class="line">                                         progress:(<span class="built_in">NSProgress</span> * __autoreleasing *)progress</div><div class="line">                                completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLResponse</span> *response, <span class="keyword">id</span> responseObject, <span class="built_in">NSError</span> *error))completionHandler;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Creates an `NSURLSessionUploadTask` with the specified request for an HTTP body.</div><div class="line"> 使用指定的请求和二进制数据，创建一个 `NSURLSessionUploadTask`</div><div class="line"></div><div class="line"> @param request The HTTP request for the request.</div><div class="line"> HTTP 请求</div><div class="line"> @param bodyData A data object containing the HTTP body to be uploaded.</div><div class="line"> 要上传的 NSData 对象</div><div class="line"> @param progress A progress object monitoring the current upload progress.</div><div class="line"> 监听当前上传进度的进度对象</div><div class="line"> @param completionHandler A block object to be executed when the task finishes. This block has no return value and takes three arguments: the server response, the response object created by that serializer, and the error that occurred, if any.</div><div class="line"></div><div class="line"> 任务完成后执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 该 block 有三个参数：服务器响应，序列化器创建的响应对象，错误(如果有)</div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="built_in">NSURLSessionUploadTask</span> *)uploadTaskWithRequest:(<span class="built_in">NSURLRequest</span> *)request</div><div class="line">                                         fromData:(<span class="built_in">NSData</span> *)bodyData</div><div class="line">                                         progress:(<span class="built_in">NSProgress</span> * __autoreleasing *)progress</div><div class="line">                                completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLResponse</span> *response, <span class="keyword">id</span> responseObject, <span class="built_in">NSError</span> *error))completionHandler;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Creates an `NSURLSessionUploadTask` with the specified streaming request.</div><div class="line"> 使用指定的流请求，创建一个 `NSURLSessionUploadTask`</div><div class="line"></div><div class="line"> @param request The HTTP request for the request.</div><div class="line"> HTTP 请求</div><div class="line"> @param progress A progress object monitoring the current upload progress.</div><div class="line"> 监听当前上传进度的进度对象</div><div class="line"> @param completionHandler A block object to be executed when the task finishes. This block has no return value and takes three arguments: the server response, the response object created by that serializer, and the error that occurred, if any.</div><div class="line"></div><div class="line"> 任务完成后执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 该 block 有三个参数：服务器响应，序列化器创建的响应对象，错误(如果有)</div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="built_in">NSURLSessionUploadTask</span> *)uploadTaskWithStreamedRequest:(<span class="built_in">NSURLRequest</span> *)request</div><div class="line">                                                 progress:(<span class="built_in">NSProgress</span> * __autoreleasing *)progress</div><div class="line">                                        completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLResponse</span> *response, <span class="keyword">id</span> responseObject, <span class="built_in">NSError</span> *error))completionHandler;</div><div class="line"></div><div class="line"><span class="comment">///-----------------------------</span></div><div class="line"><span class="comment">/// @name Running Download Tasks - 运行下载任务</span></div><div class="line"><span class="comment">///-----------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Creates an `NSURLSessionDownloadTask` with the specified request.</div><div class="line"> 使用指定的请求，创建一个 `NSURLSessionDownloadTask`</div><div class="line"></div><div class="line"> @param request The HTTP request for the request.</div><div class="line"> HTTP 请求</div><div class="line"> @param progress A progress object monitoring the current download progress.</div><div class="line"> 监听当前下载进度的进度对象</div><div class="line"> @param destination A block object to be executed in order to determine the destination of the downloaded file. This block takes two arguments, the target path &amp; the server response, and returns the desired file URL of the resulting download. The temporary file used during the download will be automatically deleted after being moved to the returned URL.</div><div class="line"></div><div class="line"> 确定保存下载文件目标位置的 block 对象</div><div class="line"> 该 block 有两个参数：目标路径和服务器响应</div><div class="line"> 返回保存下载文件目标位置的 URL</div><div class="line"> 当将下载的临时文件移动至返回的 URL 后，临时文件会被自动删除</div><div class="line"></div><div class="line"> @param completionHandler A block to be executed when a task finishes. This block has no return value and takes three arguments: the server response, the path of the downloaded file, and the error describing the network or parsing error that occurred, if any.</div><div class="line"></div><div class="line"> 任务完成后执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 该 block 有三个参数：服务器响应，下载的文件路径，错误(如果有)</div><div class="line"></div><div class="line"></div><div class="line"> @warning If using a background `NSURLSessionConfiguration` on iOS, these blocks will be lost when the app is terminated. Background sessions may prefer to use `-setDownloadTaskDidFinishDownloadingBlock:` to specify the URL for saving the downloaded file, rather than the destination block of this method.</div><div class="line"> 如果使用 iOS 后台的 `NSURLSessionConfiguration`，应用程序被终止后，这些 block 都将会丢失。针对后台会话建议使用 `-setDownloadTaskDidFinishDownloadingBlock:` 指定保存下载文件的 URL，而不要使用此方法的 destination block</div><div class="line"> */</div><div class="line">- (<span class="built_in">NSURLSessionDownloadTask</span> *)downloadTaskWithRequest:(<span class="built_in">NSURLRequest</span> *)request</div><div class="line">                                             progress:(<span class="built_in">NSProgress</span> * __autoreleasing *)progress</div><div class="line">                                          destination:(<span class="built_in">NSURL</span> * (^)(<span class="built_in">NSURL</span> *targetPath, <span class="built_in">NSURLResponse</span> *response))destination</div><div class="line">                                    completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLResponse</span> *response, <span class="built_in">NSURL</span> *filePath, <span class="built_in">NSError</span> *error))completionHandler;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Creates an `NSURLSessionDownloadTask` with the specified resume data.</div><div class="line"> 使用指定的续传数据，创建一个 `NSURLSessionDownloadTask`</div><div class="line"></div><div class="line"> @param resumeData The data used to resume downloading.</div><div class="line"> 用于断点续传的续传数据</div><div class="line"> @param progress A progress object monitoring the current download progress.</div><div class="line"> 监听当前下载进度的进度对象</div><div class="line"> @param destination A block object to be executed in order to determine the destination of the downloaded file. This block takes two arguments, the target path &amp; the server response, and returns the desired file URL of the resulting download. The temporary file used during the download will be automatically deleted after being moved to the returned URL.</div><div class="line"></div><div class="line"> 确定保存下载文件目标位置的 block 对象</div><div class="line"> 该 block 有两个参数：目标路径和服务器响应</div><div class="line"> 返回保存下载文件目标位置的 URL</div><div class="line"> 当将下载的临时文件移动至返回的 URL 后，临时文件会被自动删除</div><div class="line"></div><div class="line"> @param completionHandler A block to be executed when a task finishes. This block has no return value and takes three arguments: the server response, the path of the downloaded file, and the error describing the network or parsing error that occurred, if any.</div><div class="line"></div><div class="line"> 任务完成后执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 该 block 有三个参数：服务器响应，下载的文件路径，错误(如果有)</div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="built_in">NSURLSessionDownloadTask</span> *)downloadTaskWithResumeData:(<span class="built_in">NSData</span> *)resumeData</div><div class="line">                                                progress:(<span class="built_in">NSProgress</span> * __autoreleasing *)progress</div><div class="line">                                             destination:(<span class="built_in">NSURL</span> * (^)(<span class="built_in">NSURL</span> *targetPath, <span class="built_in">NSURLResponse</span> *response))destination</div><div class="line">                                       completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLResponse</span> *response, <span class="built_in">NSURL</span> *filePath, <span class="built_in">NSError</span> *error))completionHandler;</div><div class="line"></div><div class="line"><span class="comment">///---------------------------------</span></div><div class="line"><span class="comment">/// @name Getting Progress for Tasks - 获得任务进度</span></div><div class="line"><span class="comment">///---------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Returns the upload progress of the specified task.</div><div class="line"> 返回指定任务的上传进度</div><div class="line"></div><div class="line"> @param uploadTask The session upload task. Must not be `nil`.</div><div class="line"> 会话的上传任务，不能为空</div><div class="line"></div><div class="line"> @return An `NSProgress` object reporting the upload progress of a task, or `nil` if the progress is unavailable.</div><div class="line"> 一个 `NSProgress` 对象报告任务的上传进度，如果进度不可用，返回 `nil`</div><div class="line"> */</div><div class="line">- (<span class="built_in">NSProgress</span> *)uploadProgressForTask:(<span class="built_in">NSURLSessionUploadTask</span> *)uploadTask;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Returns the download progress of the specified task.</div><div class="line"> 返回指定任务的下载进度</div><div class="line"></div><div class="line"> @param downloadTask The session download task. Must not be `nil`.</div><div class="line"> 会话的下载任务，不能为空</div><div class="line"></div><div class="line"> @return An `NSProgress` object reporting the download progress of a task, or `nil` if the progress is unavailable.</div><div class="line"> 一个 `NSProgress` 对象报告任务的下载进度，如果进度不可用，返回 `nil`</div><div class="line"> */</div><div class="line">- (<span class="built_in">NSProgress</span> *)downloadProgressForTask:(<span class="built_in">NSURLSessionDownloadTask</span> *)downloadTask;</div><div class="line"></div><div class="line"><span class="comment">///-----------------------------------------</span></div><div class="line"><span class="comment">/// @name Setting Session Delegate Callbacks - 设置会话代理回调</span></div><div class="line"><span class="comment">///-----------------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed when the managed session becomes invalid, as handled by the `NSURLSessionDelegate` method `URLSession:didBecomeInvalidWithError:`.</div><div class="line"></div><div class="line"> 设置当管理的会话无效时执行的 block</div><div class="line"> 在 `NSURLSessionDelegate` 的 `URLSession:didBecomeInvalidWithError:` 方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed when the managed session becomes invalid. The block has no return value, and takes two arguments: the session, and the error related to the cause of invalidation.</div><div class="line"></div><div class="line"> 当管理的会话无效时执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 该 block 有两个参数：会话和导致会话无效相关的错误</div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setSessionDidBecomeInvalidBlock:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSError</span> *error))block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed when a connection level authentication challenge has occurred, as handled by the `NSURLSessionDelegate` method `URLSession:didReceiveChallenge:completionHandler:`.</div><div class="line"></div><div class="line"> 设置当连接需要身份验证质询时执行的 block</div><div class="line"> 在 `NSURLSessionDelegate` 的 `URLSession:didReceiveChallenge:completionHandler:` 方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed when a connection level authentication challenge has occurred. The block returns the disposition of the authentication challenge, and takes three arguments: the session, the authentication challenge, and a pointer to the credential that should be used to resolve the challenge.</div><div class="line"></div><div class="line"> 当连接需要身份验证质询时执行的 block 对象</div><div class="line"> 该 block 返回身份验证的配置情况</div><div class="line"> 该 block 有三个参数：会话，身份验证质询和一个指向凭据的指针，该凭据用于解决身份验证</div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setSessionDidReceiveAuthenticationChallengeBlock:(<span class="built_in">NSURLSessionAuthChallengeDisposition</span> (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLAuthenticationChallenge</span> *challenge, <span class="built_in">NSURLCredential</span> * __autoreleasing *credential))block;</div><div class="line"></div><div class="line"><span class="comment">///--------------------------------------</span></div><div class="line"><span class="comment">/// @name Setting Task Delegate Callbacks - 设置任务代理回调</span></div><div class="line"><span class="comment">///--------------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed when a task requires a new request body stream to send to the remote server, as handled by the `NSURLSessionTaskDelegate` method `URLSession:task:needNewBodyStream:`.</div><div class="line"></div><div class="line"> 设置一个请求体二进制流发送至远程服务器时执行的 block</div><div class="line"> 在 `NSURLSessionTaskDelegate` 的 `URLSession:task:needNewBodyStream:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed when a task requires a new request body stream.</div><div class="line"></div><div class="line"> 任务请求一个新请求体二进制流时执行的 block 对象</div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setTaskNeedNewBodyStreamBlock:(<span class="built_in">NSInputStream</span> * (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionTask</span> *task))block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed when an HTTP request is attempting to perform a redirection to a different URL, as handled by the `NSURLSessionTaskDelegate` method `URLSession:willPerformHTTPRedirection:newRequest:completionHandler:`.</div><div class="line"></div><div class="line"> 设置 HTTP 请求尝试重定向到其他 URL 时执行的 block</div><div class="line"> 在 `NSURLSessionTaskDelegate` 的 `URLSession:willPerformHTTPRedirection:newRequest:completionHandler:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed when an HTTP request is attempting to perform a redirection to a different URL. The block returns the request to be made for the redirection, and takes four arguments: the session, the task, the redirection response, and the request corresponding to the redirection response.</div><div class="line"></div><div class="line"> 当 HTTP 请求尝试重定向到其他 URL 时执行的 block 对象</div><div class="line"> 该 block 返回导致重定向的请求 NSURLRequest</div><div class="line"> 接收四个参数</div><div class="line"></div><div class="line">        session － 会话</div><div class="line">        任务</div><div class="line">        重定向响应</div><div class="line">        要重定向的请求</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setTaskWillPerformHTTPRedirectionBlock:(<span class="built_in">NSURLRequest</span> * (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionTask</span> *task, <span class="built_in">NSURLResponse</span> *response, <span class="built_in">NSURLRequest</span> *request))block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed when a session task has received a request specific authentication challenge, as handled by the `NSURLSessionTaskDelegate` method `URLSession:task:didReceiveChallenge:completionHandler:`.</div><div class="line"></div><div class="line"> 设置接收到特定身份验证质询时执行的 block</div><div class="line"> HTTPS 访问需要</div><div class="line"> 在 `NSURLSessionTaskDelegate` 的 `URLSession:task:didReceiveChallenge:completionHandler:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed when a session task has received a request specific authentication challenge. The block returns the disposition of the authentication challenge, and takes four arguments: the session, the task, the authentication challenge, and a pointer to the credential that should be used to resolve the challenge.</div><div class="line"></div><div class="line"> 当会话任务接收到特定身份验证质询时执行的 block 对象</div><div class="line"> 该 block 返回对身份验证请求质询的处置</div><div class="line"> 接收四个参数</div><div class="line"></div><div class="line">        session － 会话</div><div class="line">        任务</div><div class="line">        身份验证质询</div><div class="line">        指向解决验证需要使用凭据的指针</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setTaskDidReceiveAuthenticationChallengeBlock:(<span class="built_in">NSURLSessionAuthChallengeDisposition</span> (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionTask</span> *task, <span class="built_in">NSURLAuthenticationChallenge</span> *challenge, <span class="built_in">NSURLCredential</span> * __autoreleasing *credential))block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed periodically to track upload progress, as handled by the `NSURLSessionTaskDelegate` method `URLSession:task:didSendBodyData:totalBytesSent:totalBytesExpectedToSend:`.</div><div class="line"></div><div class="line"> 设置跟踪上传进度要执行的 block</div><div class="line"> 在 `NSURLSessionTaskDelegate` 的 `URLSession:task:didSendBodyData:totalBytesSent:totalBytesExpectedToSend:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be called when an undetermined number of bytes have been uploaded to the server. This block has no return value and takes five arguments: the session, the task, the number of bytes written since the last time the upload progress block was called, the total bytes written, and the total bytes expected to be written during the request, as initially determined by the length of the HTTP body. This block may be called multiple times, and will execute on the main thread.</div><div class="line"></div><div class="line"> 向服务器上传一定数量的字节后执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 接收五个参数</div><div class="line"></div><div class="line">        session － 会话</div><div class="line">        任务</div><div class="line">        从上次上传进度 block 被调用后上传的字节数 － 本次上传字节数</div><div class="line">        已经上传的字节数</div><div class="line">        请求预期上传的总字节数，由 HTTP body 的长度确定</div><div class="line"></div><div class="line"></div><div class="line"> 该 block 可能会被调用多次，并在主线程上执行</div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setTaskDidSendBodyDataBlock:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionTask</span> *task, int64_t bytesSent, int64_t totalBytesSent, int64_t totalBytesExpectedToSend))block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed as the last message related to a specific task, as handled by the `NSURLSessionTaskDelegate` method `URLSession:task:didCompleteWithError:`.</div><div class="line"></div><div class="line"> 设置特定任务完成后执行的 block</div><div class="line"> 在 `NSURLSessionTaskDelegate` 的 `URLSession:task:didCompleteWithError:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed when a session task is completed. The block has no return value, and takes three arguments: the session, the task, and any error that occurred in the process of executing the task.</div><div class="line"></div><div class="line"> 会话任务完成后执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 接收三个参数</div><div class="line"></div><div class="line">        session － 会话</div><div class="line">        任务</div><div class="line">        任务执行过程中出现的错误</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setTaskDidCompleteBlock:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionTask</span> *task, <span class="built_in">NSError</span> *error))block;</div><div class="line"></div><div class="line"><span class="comment">///-------------------------------------------</span></div><div class="line"><span class="comment">/// @name Setting Data Task Delegate Callbacks - 设置数据任务代理回调</span></div><div class="line"><span class="comment">///-------------------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed when a data task has received a response, as handled by the `NSURLSessionDataDelegate` method `URLSession:dataTask:didReceiveResponse:completionHandler:`.</div><div class="line"></div><div class="line"> 设置数据任务接收到响应时执行的 block</div><div class="line"> 在 `NSURLSessionDataDelegate` 的 `URLSession:dataTask:didReceiveResponse:completionHandler:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed when a data task has received a response. The block returns the disposition of the session response, and takes three arguments: the session, the data task, and the received response.</div><div class="line"></div><div class="line"> 数据任务接收到响应时执行的 block 对象</div><div class="line"> 该 block 返回对会话响应的处置</div><div class="line"> 接收三个参数</div><div class="line"></div><div class="line">        session － 会话</div><div class="line">        任务</div><div class="line">        接收到的响应</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setDataTaskDidReceiveResponseBlock:(<span class="built_in">NSURLSessionResponseDisposition</span> (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionDataTask</span> *dataTask, <span class="built_in">NSURLResponse</span> *response))block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed when a data task has become a download task, as handled by the `NSURLSessionDataDelegate` method `URLSession:dataTask:didBecomeDownloadTask:`.</div><div class="line"></div><div class="line"> 设置数据任务成为下载任务时执行的 block</div><div class="line"> 在 `NSURLSessionDataDelegate` 的 `URLSession:dataTask:didBecomeDownloadTask:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed when a data task has become a download task. The block has no return value, and takes three arguments: the session, the data task, and the download task it has become.</div><div class="line"></div><div class="line"> 数据任务成为下载任务时执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 接收三个参数</div><div class="line"></div><div class="line">        session － 会话</div><div class="line">        任务</div><div class="line">        成为的下载任务</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setDataTaskDidBecomeDownloadTaskBlock:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionDataTask</span> *dataTask, <span class="built_in">NSURLSessionDownloadTask</span> *downloadTask))block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed when a data task receives data, as handled by the `NSURLSessionDataDelegate` method `URLSession:dataTask:didReceiveData:`.</div><div class="line"></div><div class="line"> 设置数据任务接收到数据时执行的 block</div><div class="line"> 在 `NSURLSessionDataDelegate` 的 `URLSession:dataTask:didReceiveData:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be called when an undetermined number of bytes have been downloaded from the server. This block has no return value and takes three arguments: the session, the data task, and the data received. This block may be called multiple times, and will execute on the session manager operation queue.</div><div class="line"></div><div class="line"> 从服务器接收到一定数量的字节后执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 接收三个参数</div><div class="line"></div><div class="line">        session － 会话</div><div class="line">        任务</div><div class="line">        接收的数据</div><div class="line"></div><div class="line"></div><div class="line"> 该 block 可能会被调用多次，并在会话管理器操作队列中执行</div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setDataTaskDidReceiveDataBlock:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionDataTask</span> *dataTask, <span class="built_in">NSData</span> *data))block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed to determine the caching behavior of a data task, as handled by the `NSURLSessionDataDelegate` method `URLSession:dataTask:willCacheResponse:completionHandler:`.</div><div class="line"></div><div class="line"> 设置确定数据任务的缓存行为执行的 block</div><div class="line"> 在 `NSURLSessionDataDelegate` 的 `URLSession:dataTask:willCacheResponse:completionHandler:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed to determine the caching behavior of a data task. The block returns the response to cache, and takes three arguments: the session, the data task, and the proposed cached URL response.</div><div class="line"></div><div class="line"> 确定数据任务的缓存行为执行的 block 对象</div><div class="line"> 该 block 返回要缓存的响应</div><div class="line"> 接收三个参数</div><div class="line"></div><div class="line">        session － 会话</div><div class="line">        任务</div><div class="line">        建议缓存的 URL 响应</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setDataTaskWillCacheResponseBlock:(<span class="built_in">NSCachedURLResponse</span> * (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionDataTask</span> *dataTask, <span class="built_in">NSCachedURLResponse</span> *proposedResponse))block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed once all messages enqueued for a session have been delivered, as handled by the `NSURLSessionDataDelegate` method `URLSessionDidFinishEventsForBackgroundURLSession:`.</div><div class="line"></div><div class="line"> 设置会话的所有入队消息已经被提交时执行一次的 block</div><div class="line"> 在 `NSURLSessionDataDelegate` 的 `URLSessionDidFinishEventsForBackgroundURLSession:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed once all messages enqueued for a session have been delivered. The block has no return value and takes a single argument: the session.</div><div class="line"></div><div class="line"> 会话的所有入队消息已经被提交时执行一次的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 接收唯一一个参数</div><div class="line"></div><div class="line">        session － 会话</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setDidFinishEventsForBackgroundURLSessionBlock:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLSession</span> *session))block;</div><div class="line"></div><div class="line"><span class="comment">///-----------------------------------------------</span></div><div class="line"><span class="comment">/// @name Setting Download Task Delegate Callbacks - 设置下载任务代理回调</span></div><div class="line"><span class="comment">///-----------------------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed when a download task has completed a download, as handled by the `NSURLSessionDownloadDelegate` method `URLSession:downloadTask:didFinishDownloadingToURL:`.</div><div class="line"></div><div class="line"> 设置下载任务完成后执行的 block</div><div class="line"> 在 `NSURLSessionDownloadDelegate` 的 `URLSession:downloadTask:didFinishDownloadingToURL:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed when a download task has completed. The block returns the URL the download should be moved to, and takes three arguments: the session, the download task, and the temporary location of the downloaded file. If the file manager encounters an error while attempting to move the temporary file to the destination, an `AFURLSessionDownloadTaskDidFailToMoveFileNotification` will be posted, with the download task as its object, and the user info of the error.</div><div class="line"></div><div class="line"> 下载任务完成后执行的 block 对象</div><div class="line"> 该 block 返回下载文件被移动到的 URL</div><div class="line"> 接收三个参数</div><div class="line"></div><div class="line">        session － 会话</div><div class="line">        下载任务</div><div class="line">        保存下载文件的临时位置</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    如果 FileManager(文件管理器) 将下载文件移动到目标位置时发生错误，会发布一个 `AFURLSessionDownloadTaskDidFailToMoveFileNotification` 通知</div><div class="line"></div><div class="line">        object - 下载任务</div><div class="line">        userInfo - 错误信息</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setDownloadTaskDidFinishDownloadingBlock:(<span class="built_in">NSURL</span> * (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionDownloadTask</span> *downloadTask, <span class="built_in">NSURL</span> *location))block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed periodically to track download progress, as handled by the `NSURLSessionDownloadDelegate` method `URLSession:downloadTask:didWriteData:totalBytesWritten:totalBytesWritten:totalBytesExpectedToWrite:`.</div><div class="line"></div><div class="line"> 设置跟踪下载进度重复执行的 block</div><div class="line"> 在 `NSURLSessionDownloadDelegate` 的 `URLSession:downloadTask:didWriteData:totalBytesWritten:totalBytesWritten:totalBytesExpectedToWrite:` 代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be called when an undetermined number of bytes have been downloaded from the server. This block has no return value and takes five arguments: the session, the download task, the number of bytes read since the last time the download progress block was called, the total bytes read, and the total bytes expected to be read during the request, as initially determined by the expected content size of the `NSHTTPURLResponse` object. This block may be called multiple times, and will execute on the session manager operation queue.</div><div class="line"></div><div class="line"> 从服务器下载一定数量的字节后执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 接收五个参数</div><div class="line"></div><div class="line">        session - 会话</div><div class="line">        下载任务</div><div class="line">        从上次下载进度 block 被调用后下载的字节数 － 本次下载字节数</div><div class="line">        已经下载的字节数</div><div class="line">        请求预期下载的总字节数 - 总下载字节数，由 `NSHTTPURLResponse` 对象的 expectedContentLength 属性确定</div><div class="line"></div><div class="line"></div><div class="line"> 该 block 可能会被调用多次，并在会话管理器操作队列中执行</div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setDownloadTaskDidWriteDataBlock:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionDownloadTask</span> *downloadTask, int64_t bytesWritten, int64_t totalBytesWritten, int64_t totalBytesExpectedToWrite))block;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Sets a block to be executed when a download task has been resumed, as handled by the `NSURLSessionDownloadDelegate` method `URLSession:downloadTask:didResumeAtOffset:expectedTotalBytes:`.</div><div class="line"></div><div class="line"> 设置下载任务续传时执行的 blok</div><div class="line"> 在 `NSURLSessionDownloadDelegate` 的 `URLSession:downloadTask:didResumeAtOffset:expectedTotalBytes:` 的代理方法中执行</div><div class="line"></div><div class="line"></div><div class="line"> @param block A block object to be executed when a download task has been resumed. The block has no return value and takes four arguments: the session, the download task, the file offset of the resumed download, and the total number of bytes expected to be downloaded.</div><div class="line"></div><div class="line"> 下载任务续传时执行的 block 对象</div><div class="line"> 该 block 没有返回值</div><div class="line"> 接收四个参数</div><div class="line"></div><div class="line">        session - 会话</div><div class="line">        下载任务</div><div class="line">        续传下载的文件偏移位置</div><div class="line">        预期下载的总字节数</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)setDownloadTaskDidResumeBlock:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLSession</span> *session, <span class="built_in">NSURLSessionDownloadTask</span> *downloadTask, int64_t fileOffset, int64_t expectedTotalBytes))block;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="meta">#endif</span></div><div class="line"></div><div class="line"><span class="comment">///--------------------</span></div><div class="line"><span class="comment">/// @name Notifications - 通知</span></div><div class="line"><span class="comment">///--------------------</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Posted when a task begins executing.</div><div class="line"> 任务开始执行通知</div><div class="line"></div><div class="line"> @deprecated Use `AFNetworkingTaskDidResumeNotification` instead.</div><div class="line"> 已经废弃，使用 `AFNetworkingTaskDidResumeNotification` 替代</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidStartNotification DEPRECATED_ATTRIBUTE;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Posted when a task resumes.</div><div class="line"> 任务继续通知</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidResumeNotification;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Posted when a task finishes executing. Includes a userInfo dictionary with additional information about the task.</div><div class="line"> 任务结束执行通知，任务附加信息包含在 userInfo 字典中</div><div class="line"></div><div class="line"> @deprecated Use `AFNetworkingTaskDidCompleteNotification` instead.</div><div class="line"> 已经废弃，使用 `AFNetworkingTaskDidCompleteNotification` 替代</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidFinishNotification DEPRECATED_ATTRIBUTE;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Posted when a task finishes executing. Includes a userInfo dictionary with additional information about the task.</div><div class="line"> 任务结束执行通知，任务附加信息包含在 userInfo 字典中</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidCompleteNotification;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Posted when a task suspends its execution.</div><div class="line"> 任务暂停执行通知</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidSuspendNotification;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Posted when a session is invalidated.</div><div class="line"> 网络会话无效通知</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFURLSessionDidInvalidateNotification;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Posted when a session download task encountered an error when moving the temporary download file to a specified destination.</div><div class="line"> 会话的下载任务将临时下载文件移动指定目录发生错误通知</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFURLSessionDownloadTaskDidFailToMoveFileNotification;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The raw response data of the task. Included in the userInfo dictionary of the `AFNetworkingTaskDidFinishNotification` if response data exists for the task.</div><div class="line"></div><div class="line"> @deprecated Use `AFNetworkingTaskDidCompleteResponseDataKey` instead.</div><div class="line"> 请使用 `AFNetworkingTaskDidCompleteResponseDataKey` 替代</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidFinishResponseDataKey DEPRECATED_ATTRIBUTE;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The raw response data of the task. Included in the userInfo dictionary of the `AFNetworkingTaskDidFinishNotification` if response data exists for the task.</div><div class="line"> 任务的原始响应数据，如果任务存在响应数据，包含在 `AFNetworkingTaskDidFinishNotification` 的 userInfo 字典中</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidCompleteResponseDataKey;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The serialized response object of the task. Included in the userInfo dictionary of the `AFNetworkingTaskDidFinishNotification` if the response was serialized.</div><div class="line"></div><div class="line"> @deprecated Use `AFNetworkingTaskDidCompleteSerializedResponseKey` instead.</div><div class="line"> 请使用 `AFNetworkingTaskDidCompleteSerializedResponseKey` 替代</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidFinishSerializedResponseKey DEPRECATED_ATTRIBUTE;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The serialized response object of the task. Included in the userInfo dictionary of the `AFNetworkingTaskDidFinishNotification` if the response was serialized.</div><div class="line"> 任务响应数据的反序列化对象，如果响应数据已经被反序列化，包含在 `AFNetworkingTaskDidFinishNotification` 的 userInfo 字典中</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidCompleteSerializedResponseKey;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The response serializer used to serialize the response. Included in the userInfo dictionary of the `AFNetworkingTaskDidFinishNotification` if the task has an associated response serializer.</div><div class="line"></div><div class="line"> @deprecated Use `AFNetworkingTaskDidCompleteResponseSerializerKey` instead.</div><div class="line"> 请使用 `AFNetworkingTaskDidCompleteResponseSerializerKey` 替代</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidFinishResponseSerializerKey DEPRECATED_ATTRIBUTE;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The response serializer used to serialize the response. Included in the userInfo dictionary of the `AFNetworkingTaskDidFinishNotification` if the task has an associated response serializer.</div><div class="line"> 响应序列化器用于反序列化响应数据，如果任务已经关联至响应序列化器，包含在 `AFNetworkingTaskDidFinishNotification` 的 userInfo 字典中</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidCompleteResponseSerializerKey;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The file path associated with the download task. Included in the userInfo dictionary of the `AFNetworkingTaskDidFinishNotification` if an the response data has been stored directly to disk.</div><div class="line"></div><div class="line"> @deprecated Use `AFNetworkingTaskDidCompleteAssetPathKey` instead.</div><div class="line"> 请使用 `AFNetworkingTaskDidCompleteAssetPathKey` 替代</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidFinishAssetPathKey DEPRECATED_ATTRIBUTE;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> The file path associated with the download task. Included in the userInfo dictionary of the `AFNetworkingTaskDidFinishNotification` if an the response data has been stored directly to disk.</div><div class="line"> 与下载任务关联的文件路径，如果响应数据已经被保存至磁盘，包含在 `AFNetworkingTaskDidFinishNotification` 的 userInfo 字典中</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidCompleteAssetPathKey;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Any error associated with the task, or the serialization of the response. Included in the userInfo dictionary of the `AFNetworkingTaskDidFinishNotification` if an error exists.</div><div class="line"></div><div class="line"> @deprecated Use `AFNetworkingTaskDidCompleteErrorKey` instead.</div><div class="line"> 请使用 `AFNetworkingTaskDidCompleteErrorKey` 替代</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidFinishErrorKey DEPRECATED_ATTRIBUTE;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> Any error associated with the task, or the serialization of the response. Included in the userInfo dictionary of the `AFNetworkingTaskDidFinishNotification` if an error exists.</div><div class="line"> 与任务或者响应反序列化关联的错误，如果错误存在，包括在 `AFNetworkingTaskDidFinishNotification` 的 userInfo 字典中</div><div class="line"> */</div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> AFNetworkingTaskDidCompleteErrorKey;</div></pre></td></tr></table></figure>
<h3 id="2-__u5BF9_u4E8EAFNetworking_2-0_u5C01_u88C5"><a href="#2-__u5BF9_u4E8EAFNetworking_2-0_u5C01_u88C5" class="headerlink" title="2. 对于AFNetworking 2.0封装"></a>2. 对于AFNetworking 2.0封装</h3><p>先挖坑，等具体使用的时候再补充这章的内容。</p>
<p>###参考</p>
<blockquote>
<p><a href="https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-2.0-Migration-Guide" target="_blank" rel="external">https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-2.0-Migration-Guide</a></p>
<p><a href="http://blog.csdn.net/hufengvip/article/details/17338853" target="_blank" rel="external">http://blog.csdn.net/hufengvip/article/details/17338853</a></p>
<p><a href="http://blog.csdn.net/hufengvip/article/details/17338947" target="_blank" rel="external">http://blog.csdn.net/hufengvip/article/details/17338947</a></p>
<p><a href="http://blog.csdn.net/ysysbaobei/article/details/17391081" target="_blank" rel="external">http://blog.csdn.net/ysysbaobei/article/details/17391081</a></p>
<p><a href="http://nshipster.cn/afnetworking-2/" target="_blank" rel="external">http://nshipster.cn/afnetworking-2/</a></p>
<p><a href="http://zhangbuhuai.com/2014/08/03/AFNetworking-20-Tutorial/" target="_blank" rel="external">http://zhangbuhuai.com/2014/08/03/AFNetworking-20-Tutorial/</a></p>
<p><a href="http://blog.jobbole.com/52477/" target="_blank" rel="external">http://blog.jobbole.com/52477/</a></p>
<p><a href="http://www.cnblogs.com/michaellfx/p/2015-3-19-AFNetworking2_5.html" target="_blank" rel="external">http://www.cnblogs.com/michaellfx/p/2015-3-19-AFNetworking2_5.html</a></p>
</blockquote>
<blockquote class="blockquote-center"><br><strong>版权声明</strong><br><br><img src="/cc.png" alt=""><br><br><a href="http://yeziahehe.com">Ivan’s Blog</a> by <a href="http://yeziahehe.com/about">Ivan Ye</a> is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" rel="external">Creative Commons BY-NC-ND 4.0 International License</a>.<br>由<a href="http://yeziahehe.com/about">叶帆</a>创作并维护的<a href="http://yeziahehe.com">叶帆的博客</a>博客采用<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" rel="external">创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。<br><br>本文首发于<a href="http://yeziahehe.com">Ivan’s Blog | 叶帆的博客</a>博客（ <a href="http://yeziahehe.com">http://yeziahehe.com</a> ），版权所有，侵权必究。<br><br>本文链接：<a href="http://yeziahehe.com/2015/08/08/AFNetworking_2.0_package/">http://yeziahehe.com/2015/08/08/AFNetworking_2.0_package/</a></blockquote></span>
      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div></div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="http://7xkvt5.com1.z0.glb.clouddn.com/pay/wechat.png" alt="叶帆 WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="http://7xkvt5.com1.z0.glb.clouddn.com/pay/alipay.png" alt="叶帆 Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag">#iOS</a>
          
            <a href="/tags/AFNetworking/" rel="tag">#AFNetworking</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/07/29/UINavigationBar_translate/" rel="next" title="UINavigationBar透明">
                <i class="fa fa-chevron-left"></i> UINavigationBar透明
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/08/10/objective-c_Model_package--Mantle_learning/" rel="prev" title="objective-c中Model的封装--Mantle学习">
                objective-c中Model的封装--Mantle学习 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


        </div>

        


        
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2015/08/08/AFNetworking_2.0_package/"
           data-title="AFNetworking学习、封装" data-url="http://yeziahehe.com/2015/08/08/AFNetworking_2.0_package/">
      </div>
    
  </div>


      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://7xkvt5.com1.z0.glb.clouddn.com/blog%2Favatar.JPG" alt="叶帆" itemprop="image"/>
          <p class="site-author-name" itemprop="name">叶帆</p>
        </div>
        <p class="site-description motion-element" itemprop="description">认真你就赢了</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">39</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">42</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/yeziahehe" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/yeziahehe" target="_blank">
                  
                    <i class="fa fa-linkedin"></i> Linkedin
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/yeziahehe" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-AFURLSessionManager"><span class="nav-number">1.</span> <span class="nav-text">1.AFURLSessionManager</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-__u5BF9_u4E8EAFNetworking_2-0_u5C01_u88C5"><span class="nav-number">2.</span> <span class="nav-text">2. 对于AFNetworking 2.0封装</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">叶帆</span>
  <span id="busuanzi_container_site_pv"> | 自2015.12.13起总访问量：<span id="busuanzi_value_site_pv"></span>次</span>

</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"yeziahehe"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.2" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    motionMiddleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');
      if (CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    };
  });
</script>



  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
  


  
  

</body>
</html>
